<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script src="/main.js">
      // for home page
      function addItem2(ele) {
        let item = {};
        item.name =
          ele.parentElement.parentElement.parentElement.querySelector(
            ".product_name"
          ).innerHTML;
        item.price =
          ele.parentElement.parentElement.querySelector(".product_price").innerHTML;
        item.image =
          ele.parentElement.parentElement.parentElement.querySelector(".product_img").src;
        let shoppingCart = JSON.parse(localStorage.getItem("shoppingCart"));
        if (shoppingCart == null) shoppingCart = [];
        shoppingCart.push(item);
        localStorage.setItem("shoppingCart", JSON.stringify(shoppingCart));
        displayShoppingCart();
      }
      function displayShoppingCart() {
        console.log("999");
        let content = "";
        total_amt = 0;
        let shoppingCart = JSON.parse(localStorage.getItem("shoppingCart"));
        console.log("999", shoppingCart);
        if (shoppingCart == null) shoppingCart = [];
        shoppingCart.forEach((item) => {
          total_amt += parseInt(item.price);
          content += `
          <div class="cart_item">
            <img
              class="cart_item_img"
              src="${item.image}"
              alt="product image"
            />
            <div class="cart_item_title">
              ${item.name}
              </div>
            <div>$${item.price}</div>
            <button class="btn btn-secondary btn-remove" onclick="removeItem(${item.index})">Remove</button>
          </div>
          `;
        });
        document.getElementById("shoppingcart").innerHTML = content;
        document.getElementById("total_amt").innerHTML = "$" + total_amt;
        document.querySelector(".badge").innerHTML = shoppingCart.length;
        console.log("999", total_amt);
      }
      function removeItem(index) {
        let shoppingCart = JSON.parse(localStorage.getItem("shoppingCart"));
        if (shoppingCart == null) shoppingCart = [];

        shoppingCart.splice(index, 1);
        localStorage.setItem("shoppingCart", JSON.stringify(shoppingCart));
        displayShoppingCart();
      }
    </script>
    <link rel="stylesheet" href="main.css" />
    <title>Melbourne Watch Gallery</title>
  </head>
  <body>
    <!-- Navigation bar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" href="home.html"
                >Melbourne Watch Gallery</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="about.html">About us</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="loginpage.html">Product Management</a>
            </li>
          </ul>

          <form class="d-flex">
            <input
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
            <button class="btn btn-outline-success" type="submit">
              Search
            </button>
          </form>
        </div>
      </div>
    </nav>

    <!-- Header -->
    <div class="header">
      <img class="logo" alt="productimg" src="images/logo.jpg" />
      <h1>Melbourne Watch Gallery</h1>
    </div>

    <div class="grid-container">
      <div class="item1">
        <div>
          <h3 class="product_name">Sumsung Galaxy Watch 4</h3>
        </div>
        <div class="productimg">
          <img class="product_img" alt="productimg" src="/images/SamsungGalaxyWatch4.png" />
        </div>
        <div class="productgrid">
          <div class="price"><h2>$<span class="product_price">380</span></h2></div>
          <div class="button">
            <button class="addbtn" onclick="addItem2(this)">Add to cart</button>
          </div>
        </div>
      </div>

      <div class="item2">
        <div>
          <h3 class="product_name">Apple Watch SE Gold</h3>
        </div>
        <div class="productimg">
          <img class="product_img" alt="productimg" src="/images/AppleWatchSE40.png" />
        </div>
        <div class="productgrid">
          <div class="price"><h2>$<span class="product_price">400</span></h2></div>
          <div class="button">
            <button class="addbtn" onclick="addItem2(this)">Add to cart</button>
          </div>
        </div>
      </div>

      <div class="item3">
        <div>
          <h3 class="product_name">Fitbit Versa 2 Black</h3>
        </div>
        <div class="productimg">
          <img class="product_img" alt="productimg" src="/images/Fitbitblack.png" />
        </div>
        <div class="productgrid">
          <div class="price"><h2>$<span class="product_price">290</span></h2></div>
          <div class="button">
            <button class="addbtn" onclick="addItem2(this)">Add to cart</button>
          </div>
        </div>
      </div>

      <div class="item4">
        <div>
          <a href="/products page/fitbitversa2rose.html">
            <h3 class="product_name">Fitbit Versa 2 Rose</h3>
          </a>
        </div>
        <div class="productimg">
          <a href="/products page/fitbitversa2rose.html">
            <img class="product_img" alt="productimg" src="/images/Fitbitrose.png" />
          </a>
        </div>
        <div class="productgrid">
          <div class="price"><h2>$<span class="product_price">290</span></div>
          <div class="button">
            <button class="addbtn" onclick="addItem2(this)">Add to cart</button>
          </div>
        </div>
      </div>

      <div class="item5">
        <div>
          <h3 class="product_name">Fitbit Charge 5</h3>
        </div>
        <div class="productimg">
          <img class="product_img" alt="productimg" src="/images/FitbitCharger5.png" />
        </div>
        <div class="productgrid">
          <div class="price"><h2>$<span class="product_price">290</span></div>
          <div class="button">
            <button class="addbtn" onclick="addItem2(this)">Add to cart</button>
          </div>
        </div>
      </div>

      <div class="item6">
        <div>
          <h3 class="product_name">Apple Watch NIke SE</h3>
        </div>
        <div class="productimg">
          <img class="product_img" alt="productimg" src="/images/AppleWatchNike.png" />
        </div>
        <div class="productgrid">
          <div class="price"><h2>$<span class="product_price">450</span></h2></div>
          <div class="button">
            <button class="addbtn" onclick="addItem2(this)">Add to cart</button>
          </div>
        </div>
      </div>

      <div class="item7">
        <div class="shopcartgrid">
          <div class="cartgrid1">
            <h3>Shopping Cart</h3>
          </div>
          <div id="shoppingcart"></div>

          <div class="cartgrid5">
            <div class="cartgriditem2">
              <div>
                <h3>Total</h3>
              </div>
              <div>
                <h3><span id="total_amt">0</span></h3>
              </div>
            </div>
          </div>

          <div class="cartgrid6">
            <div>
              <button class="buy">Check out <span class="badge badge-secondary">0</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
