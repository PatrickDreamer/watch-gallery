<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="product.css" />

    <title>Melbourne Watch Gallery</title>
    <script>
      function changeimage(ele) {
        document.querySelector(".sideimg").src = ele.src;
      }
      function additem() {
        let item = {};
        item.name = document.querySelector(".item_title").innerHTML;
        item.price = document.querySelector(".item_value").innerHTML;
        item.image = document.querySelector(".mainimg").src;
        let shoppingcart = JSON.parse(localStorage.getItem("shoppingcart"));
        if (shoppingcart == null) shoppingcart = [];
        shoppingcart.push(item);
        localStorage.setItem("shoppingcart", JSON.stringify(shoppingcart));
        displayshoppingcart();
      }
      function displayshoppingcart() {
        console.log("999");
        let content = "";
        total_amt = 0;
        let shoppingcart = JSON.parse(localStorage.getItem("shoppingcart"));
        console.log("999", shoppingcart);
        if (shoppingcart == null) shoppingcart = [];
        shoppingcart.forEach((item) => {
          total_amt += parseInt(item.price);
          content += `
          <div class="cart_item">
            <img
              class="sideimg"
              src="${item.image}"
              alt="product image"
            />
            <div class="cart_item_title">
              ${item.name}
              </div>
            <div>$${item.price}</div>
            <button class="btn btn-secondary btn-remove" onclick="removeItem(${item.index})">Remove</button>
          </div>
          `;
        });
        document.getElementById("shoppingcart").innerHTML = content;
        document.getElementById("total_amt").innerHTML = "$" + total_amt;
        document.querySelector(".badge").innerHTML = shoppingcart.length;
      }
      function removeItem(index) {
        let shoppingcart = JSON.parse(localStorage.getItem("shoppingcart"));
        if (shoppingcart == null) shoppingcart = [];

        shoppingcart.splice(index, 1);
        localStorage.setItem("shoppingcart", JSON.stringify(shoppingcart));
        displayshoppingcart();
      }
    </script>
  </head>
  <body>
    <!-- Navigation bar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" href="/Home.html"
                >Melbourne Watch Gallery</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/about.html">About us</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/loginpage.html"
                >Product Management</a
              >
            </li>
          </ul>

          <form class="d-flex">
            <input
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
            <button class="btn btn-outline-success" type="submit">
              Search
            </button>
          </form>
        </div>
      </div>
    </nav>

    <!-- Header -->
    <div class="header">
      <img class="logo" alt="productimg" src="/images/logo.jpg" />
      <h1>Melbourne Watch Gallery</h1>
    </div>

    <div class="gridcontainer">
      <div class="gridcontainer1">
        <div class="gridcontainer11">
          <div class="gridcontainer111">
            <img
              class="mainimg"
              alt="productimg"
              src="/images/fitbitrosefrontview.png"
            />
          </div>

          <div class="gridcontainer112">
            <img
              onmouseover="changeimage(this)"
              class="sideimg"
              alt="productimg"
              src="https://cdn.shopify.com/s/files/1/0024/9803/5810/products/398459-Product-1-I_2b73ab39-8f42-49d2-8f70-fa9b7611b452_934x.jpg?v=1572323646"
            />
            <img
              onmouseover="changeimage(this)"
              class="sideimg"
              alt="productimg"
              src="/images/fitbitrosebackview.png"
            />
            <img
              onmouseover="changeimage(this)"
              class="sideimg"
              alt="productimg"
              src="/images/fibitrosesideview.gif"
            />
            <img
              onmouseover="changeimage(this)"
              class="sideimg"
              alt="productimg"
              src="/images/fitbitrosetop.png"
            />
          </div>
        </div>
      </div>

      <div class="gridcontainer2">
        <div>
          <h2 class="item_title">
            Fitbit Versa 2 Smart Fitness Watch (Petal/Copper Rose)
          </h2>
          <p>MODEL: VERSA2-PETAL(FB507RGPK) SKU: 398459</p>
          <h3>$<span class="item_value">290</span></h3>
          <button class="addbtn" onclick="additem()">Add to cart</button>
          <h2>Product Overview</h2>
          <p>
            Live your best life with the Fitbit Versa family of health & fitness
            watches. The new Versa 2 has a built-in microphone for voice
            control, tracks 24/7 heart rate and sleep, provides a sleep quality
            score, stores 300+ songs, makes secure purchases and includes
            powerful fitness features to elevate your routine.*
          </p>
        </div>
      </div>

      <div class="gridcontainer3">
        <div class="shopping_list">
          <div class="cartgrid1">
            <h3>Shopping Cart</h3>
          </div>

          <div id="shoppingcart"></div>

          <div class="cartgrid5">
            <div class="cartgriditem2">
              <div>
                <h3>Total</h3>
              </div>
              <div>
                <h3><span id="total_amt">0</span></h3>
              </div>
            </div>
          </div>

          <div class="cartgrid6">
            <div>
              <button class="buy">Check out <span class="badge badge-secondary">0</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
